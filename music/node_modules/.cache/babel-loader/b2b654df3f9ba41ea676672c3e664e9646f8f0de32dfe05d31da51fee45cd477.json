{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getUserRecord } from \"../../../../network/userdetail/userdetail\";\nimport { getSongUrl } from \"../../../../network/playmusic/playmusic.js\";\nimport SongTable from \"../../../components/content/SongTable.vue\";\nexport default {\n  name: \"app_Record\",\n  components: {\n    SongTable\n  },\n  data() {\n    return {\n      uid: \"\",\n      dateCategory: [{\n        title: \"所有时间\",\n        type: 0\n      }, {\n        title: \"最近一周\",\n        type: 1\n      }],\n      recordData: [],\n      currentIndex: 0\n    };\n  },\n  created() {\n    this.uid = this.$route.params.uid;\n    this.getUserRecordBy(this.uid);\n  },\n  methods: {\n    //   获取播放记录\n    getUserRecordBy(uid, type = 0) {\n      getUserRecord(uid, type).then(res => {\n        console.log(res);\n        if (res.data.code == 200) {\n          if (type === 0) {\n            res.data.allData.forEach(item => {\n              this.recordData.push(item.song);\n            });\n          } else if (type === 1) {\n            res.data.weekData.forEach(item => {\n              this.recordData.push(item.song);\n            });\n          }\n        }\n      }).catch(err => {\n        this.$message({\n          type: \"warning\",\n          message: \"暂无权限访问\",\n          showClose: true,\n          center: true\n        });\n        console.log(err);\n      });\n    },\n    // 切换记录\n    changeRecoed(type) {\n      this.getUserRecordBy(this.uid, type);\n      this.currentIndex = type;\n    },\n    playAll() {\n      this.$store.dispatch(\"addAllSong\", this.recordData);\n      //默认播放第一首歌\n      getSongUrl(this.recordData[0].id).then(res => {\n        this.$store.dispatch(\"saveSongUrl\", res.data.data[0].url);\n      });\n      //提交vuex保存当前歌曲详情\n      this.$store.dispatch(\"saveSongDetail\", this.recordData[0]);\n    }\n  }\n};","map":{"version":3,"names":["getUserRecord","getSongUrl","SongTable","name","components","data","uid","dateCategory","title","type","recordData","currentIndex","created","$route","params","getUserRecordBy","methods","then","res","console","log","code","allData","forEach","item","push","song","weekData","catch","err","$message","message","showClose","center","changeRecoed","playAll","$store","dispatch","id","url"],"sources":["src/views/userdetail/Childcomps/Record.vue"],"sourcesContent":["<template>\n\t<div class=\"record w\">\n\t\t<h2><span class=\"iconfont icon-paixingbang\"></span>听歌排行</h2>\n\t\t<div class=\"date-category\">\n\t\t\t<span v-for=\"(item, index) in dateCategory\" :key=\"index\" @click=\"changeRecoed(item.type)\" :class=\"{ active: currentIndex === index }\">{{ item.title }}</span>\n\t\t</div>\n\t\t<div class=\"btn\" v-if=\"recordData.length !== 0\">\n\t\t\t<el-button type=\"primary\" icon=\"el-icon-video-play\" @click=\"playAll\">播放全部</el-button>\n\t\t\t<el-button icon=\"el-icon-folder-add\">收藏全部</el-button>\n\t\t</div>\n\t\t<div class=\"bd\" v-if=\"recordData.length !== 0\">\n\t\t\t<SongTable :songs=\"recordData\" />\n\t\t</div>\n\t\t<div v-else>\n\t\t\t<el-empty description=\"暂无记录\" :image-size=\"200\"></el-empty>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { getUserRecord } from \"../../../../network/userdetail/userdetail\";\nimport { getSongUrl } from \"../../../../network/playmusic/playmusic.js\";\nimport SongTable from \"../../../components/content/SongTable.vue\";\nexport default {\n\tname: \"app_Record\",\n\tcomponents: { SongTable },\n\tdata() {\n\t\treturn {\n\t\t\tuid: \"\",\n\t\t\tdateCategory: [\n\t\t\t\t{ title: \"所有时间\", type: 0 },\n\t\t\t\t{ title: \"最近一周\", type: 1 },\n\t\t\t],\n\t\t\trecordData: [],\n\t\t\tcurrentIndex: 0,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.uid = this.$route.params.uid;\n\t\tthis.getUserRecordBy(this.uid);\n\t},\n\tmethods: {\n\t\t//   获取播放记录\n\t\tgetUserRecordBy(uid, type = 0) {\n\t\t\tgetUserRecord(uid, type)\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\tif (type === 0) {\n\t\t\t\t\t\t\tres.data.allData.forEach(item => {\n\t\t\t\t\t\t\t\tthis.recordData.push(item.song);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (type === 1) {\n\t\t\t\t\t\t\tres.data.weekData.forEach(item => {\n\t\t\t\t\t\t\t\tthis.recordData.push(item.song);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t\tmessage: \"暂无权限访问\",\n\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\tcenter: true,\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t});\n\t\t},\n\t\t// 切换记录\n\t\tchangeRecoed(type) {\n\t\t\tthis.getUserRecordBy(this.uid, type);\n\t\t\tthis.currentIndex = type;\n\t\t},\n\t\tplayAll() {\n\t\t\tthis.$store.dispatch(\"addAllSong\", this.recordData);\n\t\t\t//默认播放第一首歌\n\t\t\tgetSongUrl(this.recordData[0].id).then(res => {\n\t\t\t\tthis.$store.dispatch(\"saveSongUrl\", res.data.data[0].url);\n\t\t\t});\n\t\t\t//提交vuex保存当前歌曲详情\n\t\t\tthis.$store.dispatch(\"saveSongDetail\", this.recordData[0]);\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"less\" scoped>\n.iconfont {\n\tfont-size: 36px;\n\tpadding-right: 10px;\n}\n.date-category {\n\tmargin: 20px 0;\n\tspan {\n\t\tpadding-right: 10px;\n\t\tcursor: pointer;\n\t}\n}\n.active {\n\tfont-weight: 700;\n}\n</style>\n"],"mappings":";AAoBA,SAAAA,aAAA;AACA,SAAAC,UAAA;AACA,OAAAC,SAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,GAAA;MACAC,YAAA,GACA;QAAAC,KAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,IAAA;MAAA,EACA;MACAC,UAAA;MACAC,YAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAN,GAAA,QAAAO,MAAA,CAAAC,MAAA,CAAAR,GAAA;IACA,KAAAS,eAAA,MAAAT,GAAA;EACA;EACAU,OAAA;IACA;IACAD,gBAAAT,GAAA,EAAAG,IAAA;MACAT,aAAA,CAAAM,GAAA,EAAAG,IAAA,EACAQ,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,IAAAA,GAAA,CAAAb,IAAA,CAAAgB,IAAA;UACA,IAAAZ,IAAA;YACAS,GAAA,CAAAb,IAAA,CAAAiB,OAAA,CAAAC,OAAA,CAAAC,IAAA;cACA,KAAAd,UAAA,CAAAe,IAAA,CAAAD,IAAA,CAAAE,IAAA;YACA;UACA,WAAAjB,IAAA;YACAS,GAAA,CAAAb,IAAA,CAAAsB,QAAA,CAAAJ,OAAA,CAAAC,IAAA;cACA,KAAAd,UAAA,CAAAe,IAAA,CAAAD,IAAA,CAAAE,IAAA;YACA;UACA;QACA;MACA,GACAE,KAAA,CAAAC,GAAA;QACA,KAAAC,QAAA;UACArB,IAAA;UACAsB,OAAA;UACAC,SAAA;UACAC,MAAA;QACA;QACAd,OAAA,CAAAC,GAAA,CAAAS,GAAA;MACA;IACA;IACA;IACAK,aAAAzB,IAAA;MACA,KAAAM,eAAA,MAAAT,GAAA,EAAAG,IAAA;MACA,KAAAE,YAAA,GAAAF,IAAA;IACA;IACA0B,QAAA;MACA,KAAAC,MAAA,CAAAC,QAAA,oBAAA3B,UAAA;MACA;MACAT,UAAA,MAAAS,UAAA,IAAA4B,EAAA,EAAArB,IAAA,CAAAC,GAAA;QACA,KAAAkB,MAAA,CAAAC,QAAA,gBAAAnB,GAAA,CAAAb,IAAA,CAAAA,IAAA,IAAAkC,GAAA;MACA;MACA;MACA,KAAAH,MAAA,CAAAC,QAAA,wBAAA3B,UAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}