{"ast":null,"code":"import axios from \"axios\";\nimport { startLoading, endLoading } from \"common/Loading\";\nexport function request(config) {\n  const instance = axios.create({\n    // baseURL: \"/api\",\n    // baseURL: \"https://autumnfish.cn/\",\n    /* baseURL: \"http://localhost:3000\", */\n    /* baseURL: \"http://124.221.63.19:3000/\", */\n    baseURL: \"https://blue-music-api.vercel.app/\",\n    timeout: 30000,\n    withCredentials: true\n  });\n\n  // 请求拦截\n  instance.interceptors.request.use(config => {\n    if (config.url != \"/login/qr/check\") {\n      startLoading();\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n  // 响应拦截\n  instance.interceptors.response.use(response => {\n    endLoading();\n    return response;\n  }, error => {\n    endLoading();\n    return Promise.reject(error);\n  });\n  instance.defaults.withCredentials = true;\n  return instance(config);\n}\n// 下载音乐\nexport function downloadMusic(config) {\n  const instance = axios.create({\n    timeout: 30000,\n    responseType: \"blob\"\n  });\n\n  // 请求拦截\n  instance.interceptors.request.use(config => {\n    startLoading(\"准备下载...\");\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // 响应拦截\n  instance.interceptors.response.use(response => {\n    endLoading();\n    return response;\n  }, error => {\n    endLoading();\n    return Promise.reject(error);\n  });\n  return instance(config);\n}","map":{"version":3,"names":["axios","startLoading","endLoading","request","config","instance","create","baseURL","timeout","withCredentials","interceptors","use","url","error","Promise","reject","response","defaults","downloadMusic","responseType"],"sources":["C:/Users/kiki0128/Desktop/网易云音乐/Vue2-music-main/network/request.js"],"sourcesContent":["import axios from \"axios\";\nimport { startLoading, endLoading } from \"common/Loading\";\nexport function request(config) {\n\tconst instance = axios.create({\n\t\t// baseURL: \"/api\",\n\t\t// baseURL: \"https://autumnfish.cn/\",\n\t\t/* baseURL: \"http://localhost:3000\", */\n\t\t/* baseURL: \"http://124.221.63.19:3000/\", */\n\t\tbaseURL: \"https://blue-music-api.vercel.app/\",\n\t\ttimeout: 30000,\n\t\twithCredentials: true,\n\t});\n\n\t// 请求拦截\n\tinstance.interceptors.request.use(\n\t\tconfig => {\n\t\t\tif (config.url != \"/login/qr/check\") {\n\t\t\t\tstartLoading();\n\t\t\t}\n\t\t\treturn config;\n\t\t},\n\t\terror => {\n\t\t\treturn Promise.reject(error);\n\t\t}\n\t);\n\t// 响应拦截\n\tinstance.interceptors.response.use(\n\t\tresponse => {\n\t\t\tendLoading();\n\t\t\treturn response;\n\t\t},\n\t\terror => {\n\t\t\tendLoading();\n\t\t\treturn Promise.reject(error);\n\t\t}\n\t);\n\tinstance.defaults.withCredentials = true;\n\treturn instance(config);\n}\n// 下载音乐\nexport function downloadMusic(config) {\n\tconst instance = axios.create({\n\t\ttimeout: 30000,\n\t\tresponseType: \"blob\",\n\t});\n\n\t// 请求拦截\n\tinstance.interceptors.request.use(\n\t\tconfig => {\n\t\t\tstartLoading(\"准备下载...\");\n\t\t\treturn config;\n\t\t},\n\t\terror => {\n\t\t\treturn Promise.reject(error);\n\t\t}\n\t);\n\n\t// 响应拦截\n\tinstance.interceptors.response.use(\n\t\tresponse => {\n\t\t\tendLoading();\n\t\t\treturn response;\n\t\t},\n\t\terror => {\n\t\t\tendLoading();\n\t\t\treturn Promise.reject(error);\n\t\t}\n\t);\n\treturn instance(config);\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,EAAEC,UAAU,QAAQ,gBAAgB;AACzD,OAAO,SAASC,OAAOA,CAACC,MAAM,EAAE;EAC/B,MAAMC,QAAQ,GAAGL,KAAK,CAACM,MAAM,CAAC;IAC7B;IACA;IACA;IACA;IACAC,OAAO,EAAE,oCAAoC;IAC7CC,OAAO,EAAE,KAAK;IACdC,eAAe,EAAE;EAClB,CAAC,CAAC;;EAEF;EACAJ,QAAQ,CAACK,YAAY,CAACP,OAAO,CAACQ,GAAG,CAChCP,MAAM,IAAI;IACT,IAAIA,MAAM,CAACQ,GAAG,IAAI,iBAAiB,EAAE;MACpCX,YAAY,EAAE;IACf;IACA,OAAOG,MAAM;EACd,CAAC,EACDS,KAAK,IAAI;IACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC7B,CAAC,CACD;EACD;EACAR,QAAQ,CAACK,YAAY,CAACM,QAAQ,CAACL,GAAG,CACjCK,QAAQ,IAAI;IACXd,UAAU,EAAE;IACZ,OAAOc,QAAQ;EAChB,CAAC,EACDH,KAAK,IAAI;IACRX,UAAU,EAAE;IACZ,OAAOY,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC7B,CAAC,CACD;EACDR,QAAQ,CAACY,QAAQ,CAACR,eAAe,GAAG,IAAI;EACxC,OAAOJ,QAAQ,CAACD,MAAM,CAAC;AACxB;AACA;AACA,OAAO,SAASc,aAAaA,CAACd,MAAM,EAAE;EACrC,MAAMC,QAAQ,GAAGL,KAAK,CAACM,MAAM,CAAC;IAC7BE,OAAO,EAAE,KAAK;IACdW,YAAY,EAAE;EACf,CAAC,CAAC;;EAEF;EACAd,QAAQ,CAACK,YAAY,CAACP,OAAO,CAACQ,GAAG,CAChCP,MAAM,IAAI;IACTH,YAAY,CAAC,SAAS,CAAC;IACvB,OAAOG,MAAM;EACd,CAAC,EACDS,KAAK,IAAI;IACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC7B,CAAC,CACD;;EAED;EACAR,QAAQ,CAACK,YAAY,CAACM,QAAQ,CAACL,GAAG,CACjCK,QAAQ,IAAI;IACXd,UAAU,EAAE;IACZ,OAAOc,QAAQ;EAChB,CAAC,EACDH,KAAK,IAAI;IACRX,UAAU,EAAE;IACZ,OAAOY,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC7B,CAAC,CACD;EACD,OAAOR,QAAQ,CAACD,MAAM,CAAC;AACxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}