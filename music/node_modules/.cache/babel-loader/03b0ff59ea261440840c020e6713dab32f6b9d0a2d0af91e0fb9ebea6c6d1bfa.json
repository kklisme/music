{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* 网络请求 */\nimport { getSearchSong, getGoodMatch } from \"../../../components/content/songlist/SongList.vue\";\nimport SongTable from \"../../../components/content/SongTable.vue\";\nexport default {\n  name: \"SongRes\",\n  components: {\n    SongTable\n  },\n  data() {\n    return {\n      keywords: \"\",\n      //关键词\n      songRes: [],\n      //单曲\n      songResCount: 0,\n      matchSinger: {},\n      //最佳匹配歌手\n      matchAlbum: {}\n    };\n  },\n  created() {\n    // 保存搜索的关键词\n    this.keywords = this.$route.params.keywords;\n    // 获取搜索歌曲列表\n    this.getSearchSongBy();\n    // 获取最佳匹配结果\n    this.getGoodMatchBy();\n  },\n  methods: {\n    /* \n      网络请求\n      */\n    // 获取搜索歌曲列表\n    getSearchSongBy(page = 1) {\n      let offset = (page - 1) * 50;\n      getSearchSong(this.keywords, offset).then(res => {\n        this.songRes = res.data.result.songs;\n        this.songResCount = res.data.result.songCount;\n      });\n    },\n    // 获取最佳匹配结果\n    getGoodMatchBy() {\n      getGoodMatch(this.keywords).then(res => {\n        // console.log(res);\n        this.matchSinger = res.data.result.artist[0];\n        this.matchAlbum = res.data.result.album[0];\n      }).catch(err => err);\n    },\n    /* \n      事件监听\n      */\n    // 分页事件\n    // changSongPage(page) {\n    // \tthis.getSearchSongBy(page);\n    // },\n\n    // 最佳匹配事件\n    goSingerdetail() {\n      this.$router.push(\"/singerdetail/\" + this.matchSinger.id);\n    },\n    goAlbumdetail() {\n      this.$router.push(\"/albumdetail/\" + this.matchAlbum.id);\n    }\n  }\n};","map":{"version":3,"names":["getSearchSong","getGoodMatch","SongTable","name","components","data","keywords","songRes","songResCount","matchSinger","matchAlbum","created","$route","params","getSearchSongBy","getGoodMatchBy","methods","page","offset","then","res","result","songs","songCount","artist","album","catch","err","goSingerdetail","$router","push","id","goAlbumdetail"],"sources":["src/views/searchdetail/Childcomps/SongRes.vue"],"sourcesContent":["<template>\n\t<div class=\"song-res\">\n\t\t<div class=\"result\">\n\t\t\t<h3>\n\t\t\t\t搜索<span>{{ this.keywords }}</span\n\t\t\t\t>,找到{{ songResCount }}首单曲\n\t\t\t</h3>\n\t\t\t<div class=\"match\" v-if=\"Object.keys(matchSinger).length !== 0 || Object.keys(matchAlbum).length !== 0\">\n\t\t\t\t<h3>最佳匹配</h3>\n\t\t\t\t<div class=\"goodMatch\">\n\t\t\t\t\t<div class=\"matchitem\" @click=\"goSingerdetail\" v-if=\"Object.keys(matchSinger).length !== 0\">\n\t\t\t\t\t\t<div class=\"cover\">\n\t\t\t\t\t\t\t<img v-lazy=\"matchSinger.img1v1Url\" alt=\"\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"iname\">\n\t\t\t\t\t\t\t<span>歌手：{{ matchSinger.name }}</span>\n\t\t\t\t\t\t\t<span class=\"iconfont icon-xiayiye\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"matchitem\" @click=\"goAlbumdetail\" v-if=\"Object.keys(matchAlbum).length !== 0\">\n\t\t\t\t\t\t<div class=\"cover\">\n\t\t\t\t\t\t\t<img v-lazy=\"matchAlbum.picUrl\" alt=\"\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"iname\">\n\t\t\t\t\t\t\t<span>专辑：{{ matchAlbum.name }}</span>\n\t\t\t\t\t\t\t<span class=\"iconfont icon-xiayiye\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<SongTable :songs=\"songRes\" />\n\t\t<Pagination :total=\"songResCount\" :page-size=\"50\" @handleCurrentChange=\"getSearchSongBy\"/>\n\t</div>\n</template>\n\n<script>\n/* 网络请求 */\nimport { getSearchSong, getGoodMatch } from \"../../../components/content/songlist/SongList.vue\";\nimport SongTable from \"../../../components/content/SongTable.vue\";\nexport default {\n\tname: \"SongRes\",\n\tcomponents: { SongTable},\n\tdata() {\n\t\treturn {\n\t\t\tkeywords: \"\", //关键词\n\t\t\tsongRes: [], //单曲\n\t\t\tsongResCount: 0,\n\t\t\tmatchSinger: {}, //最佳匹配歌手\n\t\t\tmatchAlbum: {},\n\t\t};\n\t},\n\n\tcreated() {\n\t\t// 保存搜索的关键词\n\t\tthis.keywords = this.$route.params.keywords;\n\t\t// 获取搜索歌曲列表\n\t\tthis.getSearchSongBy();\n\t\t// 获取最佳匹配结果\n\t\tthis.getGoodMatchBy();\n\t},\n\tmethods: {\n\t\t/* \n    网络请求\n    */\n\t\t// 获取搜索歌曲列表\n\t\tgetSearchSongBy(page = 1) {\n\t\t\tlet offset = (page - 1) * 50;\n\t\t\tgetSearchSong(this.keywords, offset).then(res => {\n\t\t\t\tthis.songRes = res.data.result.songs;\n\t\t\t\tthis.songResCount = res.data.result.songCount;\n\t\t\t});\n\t\t},\n\t\t// 获取最佳匹配结果\n\t\tgetGoodMatchBy() {\n\t\t\tgetGoodMatch(this.keywords)\n\t\t\t\t.then(res => {\n\t\t\t\t\t// console.log(res);\n\t\t\t\t\tthis.matchSinger = res.data.result.artist[0];\n\t\t\t\t\tthis.matchAlbum = res.data.result.album[0];\n\t\t\t\t})\n\t\t\t\t.catch(err => err);\n\t\t},\n\n\t\t/* \n    事件监听\n    */\n\t\t// 分页事件\n\t\t// changSongPage(page) {\n\t\t// \tthis.getSearchSongBy(page);\n\t\t// },\n\n\t\t// 最佳匹配事件\n\t\tgoSingerdetail() {\n\t\t\tthis.$router.push(\"/singerdetail/\" + this.matchSinger.id);\n\t\t},\n\t\tgoAlbumdetail() {\n\t\t\tthis.$router.push(\"/albumdetail/\" + this.matchAlbum.id);\n\t\t},\n\t},\n};\n</script>\n<style lang=\"less\" scoped>\n.result {\n\tpadding: 10px 15px;\n\th3 {\n\t\tpadding-bottom: 10px;\n\t}\n}\n.goodMatch {\n\tpadding: 5px 0;\n\tdisplay: flex;\n\tcursor: pointer;\n\t.matchitem {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-right: 20px;\n\t\tborder: 1px solid #dddddd;\n\t\t&:hover {\n\t\t\tfont-weight: 700;\n\t\t}\n\t\t.cover {\n\t\t\tflex: 1;\n\t\t\timg {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t}\n\t\t.iname {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tflex: 2;\n\t\t\theight: 100%;\n\t\t\tpadding: 0 5px;\n\t\t\tbackground: #f5f5f5;\n\t\t}\n\t}\n}\n</style>\n"],"mappings":";AAqCA;AACA,SAAAA,aAAA,EAAAC,YAAA;AACA,OAAAC,SAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,QAAA;MAAA;MACAC,OAAA;MAAA;MACAC,YAAA;MACAC,WAAA;MAAA;MACAC,UAAA;IACA;EACA;EAEAC,QAAA;IACA;IACA,KAAAL,QAAA,QAAAM,MAAA,CAAAC,MAAA,CAAAP,QAAA;IACA;IACA,KAAAQ,eAAA;IACA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACA;AACA;AACA;IACA;IACAF,gBAAAG,IAAA;MACA,IAAAC,MAAA,IAAAD,IAAA;MACAjB,aAAA,MAAAM,QAAA,EAAAY,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA,KAAAb,OAAA,GAAAa,GAAA,CAAAf,IAAA,CAAAgB,MAAA,CAAAC,KAAA;QACA,KAAAd,YAAA,GAAAY,GAAA,CAAAf,IAAA,CAAAgB,MAAA,CAAAE,SAAA;MACA;IACA;IACA;IACAR,eAAA;MACAd,YAAA,MAAAK,QAAA,EACAa,IAAA,CAAAC,GAAA;QACA;QACA,KAAAX,WAAA,GAAAW,GAAA,CAAAf,IAAA,CAAAgB,MAAA,CAAAG,MAAA;QACA,KAAAd,UAAA,GAAAU,GAAA,CAAAf,IAAA,CAAAgB,MAAA,CAAAI,KAAA;MACA,GACAC,KAAA,CAAAC,GAAA,IAAAA,GAAA;IACA;IAEA;AACA;AACA;IACA;IACA;IACA;IACA;;IAEA;IACAC,eAAA;MACA,KAAAC,OAAA,CAAAC,IAAA,yBAAArB,WAAA,CAAAsB,EAAA;IACA;IACAC,cAAA;MACA,KAAAH,OAAA,CAAAC,IAAA,wBAAApB,UAAA,CAAAqB,EAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}