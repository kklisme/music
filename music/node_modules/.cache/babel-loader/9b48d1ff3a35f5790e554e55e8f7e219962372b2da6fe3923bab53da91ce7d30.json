{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* 网络请求 */\nimport { getAllMv } from \"../../../../network/recvideo/recvideo\";\n/* 子组件 */\nimport VideoList from \"../../../components/content/videolist/VideoList.vue\";\nimport TagsBar from \"../../../components/content/TagsBar.vue\";\nexport default {\n  components: {\n    VideoList,\n    TagsBar\n  },\n  name: \"app_Mv\",\n  data() {\n    return {\n      areaList: {\n        category: \"地区\",\n        list: [\"全部\", \"内地\", \"港台\", \"欧美\", \"日本\", \"韩国\"]\n      },\n      typeList: {\n        category: \"类型\",\n        list: [\"全部\", \"官方版\", \"原生\", \"现场版\", \"网易出品\"]\n      },\n      orderList: {\n        category: \"排序\",\n        list: [\"上升最快\", \"最热\", \"最新\"]\n      },\n      mvList: [],\n      //MV列表\n      hasMore: false,\n      area: \"全部\",\n      type: \"全部\",\n      order: \"上升最快\",\n      limit: 40,\n      page: 1\n    };\n  },\n  created() {\n    //   默认请求数据\n    this.getAllMvBy(\"全部\", \"全部\", \"上升最快\", 1);\n  },\n  methods: {\n    /* 网络请求事件 */\n    getAllMvBy(area, type, order, page) {\n      let offset = (page - 1) * this.limit;\n      getAllMv(area, type, order, offset, this.limit).then(res => {\n        if (res.data.hasMore) {\n          this.mvList.push(...res.data.data);\n          this.hasMore = res.data.hasMore;\n          this.page += 1;\n        }\n      });\n    },\n    /* 标签点击事件 */\n    areaClick(item) {\n      this.page = 1;\n      this.mvList = [];\n      this.area = item;\n      this.getAllMvBy(item, this.type, this.order, this.page);\n    },\n    typeClick(item) {\n      this.page = 1;\n      this.mvList = [];\n      this.type = item;\n      this.getAllMvBy(this.area, item, this.order, this.page);\n    },\n    orderClick(item) {\n      this.page = 1;\n      this.mvList = [];\n      this.order = item;\n      this.getAllMvBy(this.area, this.type, item, this.page);\n    },\n    more() {\n      let view = document.querySelector(\".view\");\n      if (Math.ceil(view.scrollTop) + view.clientHeight >= view.scrollHeight) {\n        //滚动卷去的高度+当前可视高度 >=总高度 即代表滑动到底部\n        this.getAllMvBy(this.area, this.type, this.order, this.page);\n      }\n    }\n  },\n  activated() {\n    document.querySelector(\".view\").addEventListener(\"scroll\", this.more);\n  },\n  deactivated() {\n    document.querySelector(\".view\").removeEventListener(\"scroll\", this.more);\n  }\n};","map":{"version":3,"names":["getAllMv","VideoList","TagsBar","components","name","data","areaList","category","list","typeList","orderList","mvList","hasMore","area","type","order","limit","page","created","getAllMvBy","methods","offset","then","res","push","areaClick","item","typeClick","orderClick","more","view","document","querySelector","Math","ceil","scrollTop","clientHeight","scrollHeight","activated","addEventListener","deactivated","removeEventListener"],"sources":["src/views/recvideo/Childcomps/Mv.vue"],"sourcesContent":["<template>\n\t<div class=\"mv\">\n\t\t<!-- 顶部分类标签 -->\n\t\t<div class=\"tags\" ref=\"tagsnav\">\n\t\t\t<TagsBar :taglist=\"areaList\" @tagBarClick=\"areaClick\" />\n\t\t\t<TagsBar :taglist=\"typeList\" @tagBarClick=\"typeClick\" />\n\t\t\t<TagsBar :taglist=\"orderList\" @tagBarClick=\"orderClick\" />\n\t\t</div>\n\t\t<!-- MV列表 -->\n\t\t<div class=\"mv-list\">\n\t\t\t<VideoList :videolist=\"mvList\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n/* 网络请求 */\nimport { getAllMv } from \"../../../../network/recvideo/recvideo\";\n/* 子组件 */\nimport VideoList from \"../../../components/content/videolist/VideoList.vue\";\nimport TagsBar from \"../../../components/content/TagsBar.vue\";\nexport default {\n\tcomponents: { VideoList, TagsBar },\n\tname: \"app_Mv\",\n\tdata() {\n\t\treturn {\n\t\t\tareaList: {\n\t\t\t\tcategory: \"地区\",\n\t\t\t\tlist: [\"全部\", \"内地\", \"港台\", \"欧美\", \"日本\", \"韩国\"],\n\t\t\t},\n\t\t\ttypeList: {\n\t\t\t\tcategory: \"类型\",\n\t\t\t\tlist: [\"全部\", \"官方版\", \"原生\", \"现场版\", \"网易出品\"],\n\t\t\t},\n\t\t\torderList: {\n\t\t\t\tcategory: \"排序\",\n\t\t\t\tlist: [\"上升最快\", \"最热\", \"最新\"],\n\t\t\t},\n\t\t\tmvList: [], //MV列表\n\t\t\thasMore: false,\n\t\t\tarea: \"全部\",\n\t\t\ttype: \"全部\",\n\t\t\torder: \"上升最快\",\n\t\t\tlimit: 40,\n\t\t\tpage: 1,\n\t\t};\n\t},\n\tcreated() {\n\t\t//   默认请求数据\n\t\tthis.getAllMvBy(\"全部\", \"全部\", \"上升最快\", 1);\n\t},\n\tmethods: {\n\t\t/* 网络请求事件 */\n\t\tgetAllMvBy(area, type, order, page) {\n\t\t\tlet offset = (page - 1) * this.limit;\n\t\t\tgetAllMv(area, type, order, offset, this.limit).then(res => {\n\t\t\t\tif (res.data.hasMore) {\n\t\t\t\t\tthis.mvList.push(...res.data.data);\n\t\t\t\t\tthis.hasMore = res.data.hasMore;\n\t\t\t\t\tthis.page += 1;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/* 标签点击事件 */\n\t\tareaClick(item) {\n\t\t\tthis.page = 1;\n\t\t\tthis.mvList = [];\n\t\t\tthis.area = item;\n\t\t\tthis.getAllMvBy(item, this.type, this.order, this.page);\n\t\t},\n\t\ttypeClick(item) {\n\t\t\tthis.page = 1;\n\t\t\tthis.mvList = [];\n\t\t\tthis.type = item;\n\t\t\tthis.getAllMvBy(this.area, item, this.order, this.page);\n\t\t},\n\t\torderClick(item) {\n\t\t\tthis.page = 1;\n\t\t\tthis.mvList = [];\n\t\t\tthis.order = item;\n\t\t\tthis.getAllMvBy(this.area, this.type, item, this.page);\n\t\t},\n\n\t\tmore() {\n\t\t\tlet view = document.querySelector(\".view\");\n\t\t\tif (Math.ceil(view.scrollTop) + view.clientHeight >= view.scrollHeight) {\n\t\t\t\t//滚动卷去的高度+当前可视高度 >=总高度 即代表滑动到底部\n\t\t\t\tthis.getAllMvBy(this.area, this.type, this.order, this.page);\n\t\t\t}\n\t\t},\n\t},\n\tactivated() {\n\t\tdocument.querySelector(\".view\").addEventListener(\"scroll\", this.more);\n\t},\n\tdeactivated() {\n\t\tdocument.querySelector(\".view\").removeEventListener(\"scroll\", this.more);\n\t},\n};\n</script>\n\n<style lang=\"less\" scoped>\n.mv {\n\tposition: relative;\n}\n.mv-list {\n\tpadding-top: 30px;\n}\n</style>\n"],"mappings":";AAgBA;AACA,SAAAA,QAAA;AACA;AACA,OAAAC,SAAA;AACA,OAAAC,OAAA;AACA;EACAC,UAAA;IAAAF,SAAA;IAAAC;EAAA;EACAE,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACAC,QAAA;QACAF,QAAA;QACAC,IAAA;MACA;MACAE,SAAA;QACAH,QAAA;QACAC,IAAA;MACA;MACAG,MAAA;MAAA;MACAC,OAAA;MACAC,IAAA;MACAC,IAAA;MACAC,KAAA;MACAC,KAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA;IACAD,WAAAN,IAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAE,IAAA;MACA,IAAAI,MAAA,IAAAJ,IAAA,aAAAD,KAAA;MACAhB,QAAA,CAAAa,IAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAM,MAAA,OAAAL,KAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAlB,IAAA,CAAAO,OAAA;UACA,KAAAD,MAAA,CAAAa,IAAA,IAAAD,GAAA,CAAAlB,IAAA,CAAAA,IAAA;UACA,KAAAO,OAAA,GAAAW,GAAA,CAAAlB,IAAA,CAAAO,OAAA;UACA,KAAAK,IAAA;QACA;MACA;IACA;IACA;IACAQ,UAAAC,IAAA;MACA,KAAAT,IAAA;MACA,KAAAN,MAAA;MACA,KAAAE,IAAA,GAAAa,IAAA;MACA,KAAAP,UAAA,CAAAO,IAAA,OAAAZ,IAAA,OAAAC,KAAA,OAAAE,IAAA;IACA;IACAU,UAAAD,IAAA;MACA,KAAAT,IAAA;MACA,KAAAN,MAAA;MACA,KAAAG,IAAA,GAAAY,IAAA;MACA,KAAAP,UAAA,MAAAN,IAAA,EAAAa,IAAA,OAAAX,KAAA,OAAAE,IAAA;IACA;IACAW,WAAAF,IAAA;MACA,KAAAT,IAAA;MACA,KAAAN,MAAA;MACA,KAAAI,KAAA,GAAAW,IAAA;MACA,KAAAP,UAAA,MAAAN,IAAA,OAAAC,IAAA,EAAAY,IAAA,OAAAT,IAAA;IACA;IAEAY,KAAA;MACA,IAAAC,IAAA,GAAAC,QAAA,CAAAC,aAAA;MACA,IAAAC,IAAA,CAAAC,IAAA,CAAAJ,IAAA,CAAAK,SAAA,IAAAL,IAAA,CAAAM,YAAA,IAAAN,IAAA,CAAAO,YAAA;QACA;QACA,KAAAlB,UAAA,MAAAN,IAAA,OAAAC,IAAA,OAAAC,KAAA,OAAAE,IAAA;MACA;IACA;EACA;EACAqB,UAAA;IACAP,QAAA,CAAAC,aAAA,UAAAO,gBAAA,gBAAAV,IAAA;EACA;EACAW,YAAA;IACAT,QAAA,CAAAC,aAAA,UAAAS,mBAAA,gBAAAZ,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}