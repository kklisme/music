{"ast":null,"code":"// 网络请求\nimport { getBanner, getPersonalized, getPrivatecontent, getRecommend, getNewsong, getNewmv } from \"../../../../network/findmusic/discover/discover\";\n// 子组件\nimport Banner from \"./Childcomps/Banner.vue\";\nimport Personalized from \"./Childcomps/Personalized.vue\";\nimport Privatecontent from \"./Childcomps/Privatecontent.vue\";\nimport RecNewSong from \"./Childcomps/RecNewSong.vue\";\nimport NewMv from \"./Childcomps/NewMv.vue\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"app_Discover\",\n  components: {\n    Banner,\n    Personalized,\n    Privatecontent,\n    RecNewSong,\n    NewMv\n  },\n  data() {\n    return {\n      banner: [],\n      //轮播图数据\n      personalized: [],\n      //推荐歌单\n      privatecontent: [],\n      //独家放送\n      newsong: [],\n      //每日推荐新音乐\n      newmv: []\n    };\n  },\n  computed: {\n    ...mapGetters([\"isLogin\"])\n  },\n  created() {\n    // 获取轮播图数据\n    getBanner().then(res => {\n      this.banner = res.data.banners;\n    });\n    this.getRecommendBy();\n  },\n  methods: {\n    // 获取推荐歌单\n    getRecommendBy() {\n      if (this.isLogin) {\n        getRecommend().then(res => {\n          let recommend = res.data.recommend;\n          let limit = 18 - recommend.length;\n          getPersonalized(limit).then(res => {\n            this.personalized = [...recommend, ...res.data.result];\n            this.getRecOther();\n          });\n        });\n      } else {\n        getPersonalized(18).then(res => {\n          this.personalized = res.data.result;\n          this.getRecOther();\n        });\n      }\n    },\n    getRecOther() {\n      // 获取每日推荐新音乐\n      getNewsong(15).then(res => {\n        this.newsong = res.data.result;\n      }).catch(err => err);\n      // 获取独家放送入口数据\n      getPrivatecontent().then(res => {\n        this.privatecontent = res.data.result;\n      });\n      // 获取推荐MV\n      getNewmv().then(res => {\n        this.newmv = res.data.result;\n      });\n    }\n  },\n  watch: {\n    isLogin() {\n      this.getRecommendBy();\n    }\n  }\n};","map":{"version":3,"names":["getBanner","getPersonalized","getPrivatecontent","getRecommend","getNewsong","getNewmv","Banner","Personalized","Privatecontent","RecNewSong","NewMv","mapGetters","name","components","data","banner","personalized","privatecontent","newsong","newmv","computed","created","then","res","banners","getRecommendBy","methods","isLogin","recommend","limit","length","result","getRecOther","catch","err","watch"],"sources":["src/views/findmusic/discover/Discover.vue"],"sourcesContent":["<template>\n\t<div class=\"discover\">\n\t\t<!-- 轮播图 -->\n\t\t<Banner :banner=\"banner\" />\n\t\t<!-- 推荐歌单 -->\n\t\t<Personalized :personalized=\"personalized\" />\n\t\t<!-- 推荐MV -->\n\t\t<NewMv :newmv=\"newmv\" />\n\t\t<!-- 最新音乐 -->\n\t\t<RecNewSong :newsong=\"newsong\" />\n\t\t<!-- 独家放送 -->\n\t\t<Privatecontent :privatecontent=\"privatecontent\" />\n\t</div>\n</template>\n\n<script>\n// 网络请求\nimport { getBanner, getPersonalized, getPrivatecontent, getRecommend, getNewsong, getNewmv } from \"../../../../network/findmusic/discover/discover\";\n// 子组件\nimport Banner from \"./Childcomps/Banner.vue\";\nimport Personalized from \"./Childcomps/Personalized.vue\";\nimport Privatecontent from \"./Childcomps/Privatecontent.vue\";\nimport RecNewSong from \"./Childcomps/RecNewSong.vue\";\nimport NewMv from \"./Childcomps/NewMv.vue\";\nimport { mapGetters } from \"vuex\";\nexport default {\n\tname: \"app_Discover\",\n\tcomponents: { Banner, Personalized, Privatecontent, RecNewSong, NewMv },\n\tdata() {\n\t\treturn {\n\t\t\tbanner: [], //轮播图数据\n\t\t\tpersonalized: [], //推荐歌单\n\t\t\tprivatecontent: [], //独家放送\n\t\t\tnewsong: [], //每日推荐新音乐\n\t\t\tnewmv: [],\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters([\"isLogin\"]),\n\t},\n\tcreated() {\n\t\t// 获取轮播图数据\n\t\tgetBanner().then(res => {\n\t\t\tthis.banner = res.data.banners;\n\t\t});\n\t\tthis.getRecommendBy();\n\t},\n\tmethods: {\n\t\t// 获取推荐歌单\n\t\tgetRecommendBy() {\n\t\t\tif (this.isLogin) {\n\t\t\t\tgetRecommend().then(res => {\n\t\t\t\t\tlet recommend = res.data.recommend;\n\t\t\t\t\tlet limit = 18 - recommend.length;\n\t\t\t\t\tgetPersonalized(limit).then(res => {\n\t\t\t\t\t\tthis.personalized = [...recommend, ...res.data.result];\n\t\t\t\t\t\tthis.getRecOther();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgetPersonalized(18).then(res => {\n\t\t\t\t\tthis.personalized = res.data.result;\n\t\t\t\t\tthis.getRecOther();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetRecOther() {\n\t\t\t// 获取每日推荐新音乐\n\t\t\tgetNewsong(15)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.newsong = res.data.result;\n\t\t\t\t})\n\t\t\t\t.catch(err => err);\n\t\t\t// 获取独家放送入口数据\n\t\t\tgetPrivatecontent().then(res => {\n\t\t\t\tthis.privatecontent = res.data.result;\n\t\t\t});\n\t\t\t// 获取推荐MV\n\t\t\tgetNewmv().then(res => {\n\t\t\t\tthis.newmv = res.data.result;\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tisLogin() {\n\t\t\tthis.getRecommendBy();\n\t\t},\n\t},\n};\n</script>\n<style lang=\"less\" scoped></style>\n"],"mappings":"AAgBA;AACA,SAAAA,SAAA,EAAAC,eAAA,EAAAC,iBAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,QAAA;AACA;AACA,OAAAC,MAAA;AACA,OAAAC,YAAA;AACA,OAAAC,cAAA;AACA,OAAAC,UAAA;AACA,OAAAC,KAAA;AACA,SAAAC,UAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAP,MAAA;IAAAC,YAAA;IAAAC,cAAA;IAAAC,UAAA;IAAAC;EAAA;EACAI,KAAA;IACA;MACAC,MAAA;MAAA;MACAC,YAAA;MAAA;MACAC,cAAA;MAAA;MACAC,OAAA;MAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAT,UAAA;EACA;EACAU,QAAA;IACA;IACArB,SAAA,GAAAsB,IAAA,CAAAC,GAAA;MACA,KAAAR,MAAA,GAAAQ,GAAA,CAAAT,IAAA,CAAAU,OAAA;IACA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACA;IACAD,eAAA;MACA,SAAAE,OAAA;QACAxB,YAAA,GAAAmB,IAAA,CAAAC,GAAA;UACA,IAAAK,SAAA,GAAAL,GAAA,CAAAT,IAAA,CAAAc,SAAA;UACA,IAAAC,KAAA,QAAAD,SAAA,CAAAE,MAAA;UACA7B,eAAA,CAAA4B,KAAA,EAAAP,IAAA,CAAAC,GAAA;YACA,KAAAP,YAAA,OAAAY,SAAA,KAAAL,GAAA,CAAAT,IAAA,CAAAiB,MAAA;YACA,KAAAC,WAAA;UACA;QACA;MACA;QACA/B,eAAA,KAAAqB,IAAA,CAAAC,GAAA;UACA,KAAAP,YAAA,GAAAO,GAAA,CAAAT,IAAA,CAAAiB,MAAA;UACA,KAAAC,WAAA;QACA;MACA;IACA;IACAA,YAAA;MACA;MACA5B,UAAA,KACAkB,IAAA,CAAAC,GAAA;QACA,KAAAL,OAAA,GAAAK,GAAA,CAAAT,IAAA,CAAAiB,MAAA;MACA,GACAE,KAAA,CAAAC,GAAA,IAAAA,GAAA;MACA;MACAhC,iBAAA,GAAAoB,IAAA,CAAAC,GAAA;QACA,KAAAN,cAAA,GAAAM,GAAA,CAAAT,IAAA,CAAAiB,MAAA;MACA;MACA;MACA1B,QAAA,GAAAiB,IAAA,CAAAC,GAAA;QACA,KAAAJ,KAAA,GAAAI,GAAA,CAAAT,IAAA,CAAAiB,MAAA;MACA;IACA;EACA;EACAI,KAAA;IACAR,QAAA;MACA,KAAAF,cAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}