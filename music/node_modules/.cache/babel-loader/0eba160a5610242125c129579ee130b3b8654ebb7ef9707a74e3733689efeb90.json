{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getSearchHotWord } from \"../../../network/searchdetail/searchdeatil\";\nexport default {\n  name: \"app_Searchinput\",\n  data() {\n    return {\n      searchWord: \"\",\n      searchList: [],\n      historySearch: this.getItem(\"historySearch\") ? this.getItem(\"historySearch\") : [],\n      clearIcon: false,\n      historySearchIndex: 0\n    };\n  },\n  created() {\n    getSearchHotWord().then(res => {\n      this.searchList = res.data.data;\n    });\n  },\n  methods: {\n    // 搜索事件\n    search() {\n      if (this.searchWord == \"\") {\n        this.$message({\n          showClose: true,\n          message: \"请输入内容\",\n          type: \"warning\",\n          center: true\n        });\n      } else {\n        console.log(\"搜索\");\n        this.$router.push(\"/searchdetail/\" + this.searchWord).catch(err => err);\n        this.$refs.popover.doClose(); //关闭弹框\n        this.addHistory(this.searchWord);\n      }\n    },\n    // 热搜榜添加\n    addHotWord(word) {\n      this.$refs.popover.doClose(); //关闭弹框\n      this.searchWord = word;\n      this.$router.push(\"/searchdetail/\" + this.searchWord).catch(err => err);\n      this.addHistory(word);\n    },\n    addHistory(word) {\n      if (!this.historySearch.includes(word)) {\n        this.historySearch.push(word); //添加历史搜索\n        this.setItem(\"historySearch\", this.historySearch);\n      }\n    },\n    showClear(index) {\n      this.clearIcon = true;\n      this.historySearchIndex = index;\n    },\n    deleteHistory(index) {\n      this.historySearch.splice(index, 1);\n      this.setItem(\"historySearch\", this.historySearch);\n    },\n    deleteAll() {\n      this.removeItem(\"historySearch\");\n      this.historySearch = [];\n    }\n  }\n};","map":{"version":3,"names":["getSearchHotWord","name","data","searchWord","searchList","historySearch","getItem","clearIcon","historySearchIndex","created","then","res","methods","search","$message","showClose","message","type","center","console","log","$router","push","catch","err","$refs","popover","doClose","addHistory","addHotWord","word","includes","setItem","showClear","index","deleteHistory","splice","deleteAll","removeItem"],"sources":["src/components/common/Searchinput.vue"],"sourcesContent":["<template>\n\t<div class=\"search-input\">\n\t\t<!-- 输入框 -->\n\t\t<el-input placeholder=\"请输入内容\" size=\"small\" v-model.trim=\"searchWord\" v-popover:popover slot=\"reference\" @keyup.enter.native=\"search\">\n\t\t\t<span slot=\"suffix\" class=\"el-icon-search\" @click=\"search\"></span>\n\t\t</el-input>\n\t\t<!-- 热搜弹出框 -->\n\t\t<el-popover ref=\"popover\" placement=\"bottom\" width=\"350\" trigger=\"focus\">\n\t\t\t<div class=\"list\">\n\t\t\t\t<div class=\"history\" v-if=\"historySearch.length != 0\">\n\t\t\t\t\t<div class=\"hd\">\n\t\t\t\t\t\t<h3>搜索历史</h3>\n\t\t\t\t\t\t<span @click=\"deleteAll\" class=\"iconfont icon-delete\">清空</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"bd\">\n\t\t\t\t\t\t<div class=\"historylist\">\n\t\t\t\t\t\t\t<div class=\"historylistitem\" v-for=\"(item, index) in historySearch\" :key=\"index\" @mouseover=\"showClear(index)\" @mouseleave=\"clearIcon = false\" @click=\"addHotWord(item)\">\n\t\t\t\t\t\t\t\t<span class=\"icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"txt\">{{ item }}</span>\n\t\t\t\t\t\t\t\t<span class=\"icon\"><i class=\"iconfont icon-guanbi\" v-if=\"clearIcon && historySearchIndex == index\" @click.stop=\"deleteHistory(index)\"></i></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hot-search-rank hot-search-pop\">\n\t\t\t\t\t<h3>热搜榜</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li v-for=\"(item, index) in searchList\" :key=\"index\" @click=\"addHotWord(item.searchWord)\">\n\t\t\t\t\t\t\t<div class=\"num\" :class=\"index < 3 ? 'hotword-num' : ''\">\n\t\t\t\t\t\t\t\t{{ index + 1 }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"main-content\">\n\t\t\t\t\t\t\t\t<div class=\"word\">\n\t\t\t\t\t\t\t\t\t<span :class=\"index < 3 ? 'hotword' : ''\">\n\t\t\t\t\t\t\t\t\t\t{{ item.searchWord }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"by\">{{ item.score }}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"icon\" v-if=\"item.iconUrl\">\n\t\t\t\t\t\t\t\t\t\t<img :src=\"item.iconUrl\" alt=\"\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class=\"by\" v-if=\"item.content\">{{ item.content }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-popover>\n\t</div>\n</template>\n\n<script>\nimport { getSearchHotWord } from \"../../../network/searchdetail/searchdeatil\";\nexport default {\n\tname: \"app_Searchinput\",\n\tdata() {\n\t\treturn {\n\t\t\tsearchWord: \"\",\n\t\t\tsearchList: [],\n\t\t\thistorySearch: this.getItem(\"historySearch\") ? this.getItem(\"historySearch\") : [],\n\t\t\tclearIcon: false,\n\t\t\thistorySearchIndex: 0,\n\t\t};\n\t},\n\tcreated() {\n\t\tgetSearchHotWord().then(res => {\n\t\t\tthis.searchList = res.data.data;\n\t\t});\n\t},\n\tmethods: {\n\t\t// 搜索事件\n\t\tsearch() {\n\t\t\tif (this.searchWord == \"\") {\n\t\t\t\tthis.$message({\n\t\t\t\t\tshowClose: true,\n\t\t\t\t\tmessage: \"请输入内容\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tcenter: true,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(\"搜索\");\n\t\t\t\tthis.$router.push(\"/searchdetail/\" + this.searchWord).catch(err => err);\n\t\t\t\tthis.$refs.popover.doClose(); //关闭弹框\n\t\t\t\tthis.addHistory(this.searchWord);\n\t\t\t}\n\t\t},\n\t\t// 热搜榜添加\n\t\taddHotWord(word) {\n\t\t\tthis.$refs.popover.doClose(); //关闭弹框\n\t\t\tthis.searchWord = word;\n\t\t\tthis.$router.push(\"/searchdetail/\" + this.searchWord).catch(err => err);\n\t\t\tthis.addHistory(word);\n\t\t},\n\t\taddHistory(word) {\n\t\t\tif (!this.historySearch.includes(word)) {\n\t\t\t\tthis.historySearch.push(word); //添加历史搜索\n\t\t\t\tthis.setItem(\"historySearch\", this.historySearch);\n\t\t\t}\n\t\t},\n\t\tshowClear(index) {\n\t\t\tthis.clearIcon = true;\n\t\t\tthis.historySearchIndex = index;\n\t\t},\n\t\tdeleteHistory(index) {\n\t\t\tthis.historySearch.splice(index, 1);\n\t\t\tthis.setItem(\"historySearch\", this.historySearch);\n\t\t},\n\t\tdeleteAll() {\n\t\t\tthis.removeItem(\"historySearch\");\n\t\t\tthis.historySearch = [];\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"less\" scoped>\n.search-input {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\t.el-icon-search {\n\t\tcursor: pointer;\n\t\tpadding-top: 10px;\n\t\t&:hover {\n\t\t\tcolor: var(--themeColor);\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n}\n.list {\n\twidth: 350px;\n\theight: 450px;\n\toverflow-y: scroll;\n\th3 {\n\t\tpadding-left: 6px;\n\t}\n}\n.history {\n\tpadding-top: 5px;\n\t.hd {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t.icon-delete {\n\t\t\tfont-size: 13px;\n\t\t\tpadding-left: 10px;\n\t\t\t&:hover {\n\t\t\t\tcolor: var(--themeColor);\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t}\n\t.bd {\n\t\t.historylist {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\tpadding: 10px 5px;\n\t\t\t.historylistitem {\n\t\t\t\tmargin-left: 5px;\n\t\t\t\tmargin-bottom: 5px;\n\t\t\t\tpadding: 3px 0;\n\t\t\t\tfont-size: 13px;\n\t\t\t\tborder-radius: 15px;\n\t\t\t\tborder: 1px solid #d3d3d3;\n\t\t\t\tcursor: pointer;\n\t\t\t\t.icon {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\twidth: 12px;\n\t\t\t\t\theight: 12px;\n\t\t\t\t\tmargin-right: 3px;\n\t\t\t\t}\n\t\t\t\t.icon-guanbi {\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tcolor: var(--themeColor);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n.hot-search-rank {\n\t// width: 350px;\n\t// height: 450px;\n\t// overflow-y: scroll;\n\tcursor: pointer;\n\tbackground: #fff;\n\tli {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 10px 5px;\n\t\t.num {\n\t\t\twidth: 30px;\n\t\t\tpadding-left: 5px;\n\t\t}\n\t\t.hotword-num {\n\t\t\tcolor: red;\n\t\t\tfont-weight: 700;\n\t\t}\n\t\t.main-content {\n\t\t\t.word {\n\t\t\t\tspan {\n\t\t\t\t\tpadding-right: 10px;\n\t\t\t\t}\n\t\t\t\t.icon {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\twidth: 30px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\timg {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tp {\n\t\t\t\tpadding-top: 5px;\n\t\t\t}\n\t\t\t.hotword {\n\t\t\t\tcolor: black;\n\t\t\t\tfont-weight: 700;\n\t\t\t}\n\t\t}\n\t}\n\tli:hover {\n\t\tbackground: rgba(220, 220, 220, 0.4);\n\t}\n}\n</style>"],"mappings":";AAqDA,SAAAA,gBAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,UAAA;MACAC,aAAA,OAAAC,OAAA,yBAAAA,OAAA;MACAC,SAAA;MACAC,kBAAA;IACA;EACA;EACAC,QAAA;IACAT,gBAAA,GAAAU,IAAA,CAAAC,GAAA;MACA,KAAAP,UAAA,GAAAO,GAAA,CAAAT,IAAA,CAAAA,IAAA;IACA;EACA;EACAU,OAAA;IACA;IACAC,OAAA;MACA,SAAAV,UAAA;QACA,KAAAW,QAAA;UACAC,SAAA;UACAC,OAAA;UACAC,IAAA;UACAC,MAAA;QACA;MACA;QACAC,OAAA,CAAAC,GAAA;QACA,KAAAC,OAAA,CAAAC,IAAA,yBAAAnB,UAAA,EAAAoB,KAAA,CAAAC,GAAA,IAAAA,GAAA;QACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,OAAA;QACA,KAAAC,UAAA,MAAAzB,UAAA;MACA;IACA;IACA;IACA0B,WAAAC,IAAA;MACA,KAAAL,KAAA,CAAAC,OAAA,CAAAC,OAAA;MACA,KAAAxB,UAAA,GAAA2B,IAAA;MACA,KAAAT,OAAA,CAAAC,IAAA,yBAAAnB,UAAA,EAAAoB,KAAA,CAAAC,GAAA,IAAAA,GAAA;MACA,KAAAI,UAAA,CAAAE,IAAA;IACA;IACAF,WAAAE,IAAA;MACA,UAAAzB,aAAA,CAAA0B,QAAA,CAAAD,IAAA;QACA,KAAAzB,aAAA,CAAAiB,IAAA,CAAAQ,IAAA;QACA,KAAAE,OAAA,uBAAA3B,aAAA;MACA;IACA;IACA4B,UAAAC,KAAA;MACA,KAAA3B,SAAA;MACA,KAAAC,kBAAA,GAAA0B,KAAA;IACA;IACAC,cAAAD,KAAA;MACA,KAAA7B,aAAA,CAAA+B,MAAA,CAAAF,KAAA;MACA,KAAAF,OAAA,uBAAA3B,aAAA;IACA;IACAgC,UAAA;MACA,KAAAC,UAAA;MACA,KAAAjC,aAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}